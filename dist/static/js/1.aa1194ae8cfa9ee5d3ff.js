webpackJsonp([1],{"4DsF":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("JymM"),r=n.n(i);for(var c in i)"default"!==c&&function(t){n.d(e,t,function(){return i[t]})}(c);var s=n("M14z");var o=function(t){n("Ggyo")},u=n("VU/8")(r.a,s.a,!1,o,null,null);e.default=u.exports},"5GBp":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("u8bG"),r=n.n(i);for(var c in i)"default"!==c&&function(t){n.d(e,t,function(){return i[t]})}(c);var s=n("eWkP");var o=function(t){n("ekg3")},u=n("VU/8")(r.a,s.a,!1,o,null,null);e.default=u.exports},"8/c5":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("cVso"),r=n.n(i);for(var c in i)"default"!==c&&function(t){n.d(e,t,function(){return i[t]})}(c);var s=n("Qoam");var o=function(t){n("eWc2")},u=n("VU/8")(r.a,s.a,!1,o,null,null);e.default=u.exports},Ggyo:function(t,e){},JcJ0:function(t,e,n){"use strict";var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"lyric",staticClass:"lyric"},[n("div",{staticClass:"lyric-name"},[t._v(t._s(t._f("musicContent")(t.currentMusic.name,"name")))]),t._v(" "),n("div",{staticClass:"lyric-info"},[t._v("歌手: "+t._s(t._f("musicContent")(t.currentMusic.singer,"singer")))]),t._v(" "),n("div",{staticClass:"lyric-info"},[t._v("专辑: "+t._s(t._f("musicContent")(t.currentMusic.album,"album")))]),t._v(" "),t.currentMusic.id?n("div",{staticClass:"lyric-con",style:{height:t.lyricHeight+"px"}},[n("div",{staticClass:"lyric-con-center"},[n("div",{staticClass:"lyric-con-list",style:{transform:"translateY("+t.translateY+"px)"}},t._l(t.lyric,function(e,i){return n("div",{staticClass:"lyric-con-item",class:{active:t.currentIndex==i},on:{click:function(n){t.selLyric(e.time)}}},[t._v(t._s(e.text))])}))])]):n("div",{staticClass:"none-lyric",style:{height:t.lyricHeight+"px"}},[t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"none-info"},[e("div",{staticClass:"iconfont icon-yinle"}),this._v(" "),e("div",[this._v("在线播放器 歌真多")])])}]};e.a=i},JymM:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n("Dd8w"),c=(i=r)&&i.__esModule?i:{default:i},s=n("NYxO");e.default={data:function(){return{totalWidth:0,status:!1,offsetX:0}},props:["playPercent","loadPercent","type"],computed:(0,c.default)({},(0,s.mapGetters)(["playFlag","currentIndex"]),{playWidth:function(){return this.playPercent*this.totalWidth},loadWidth:function(){return this.loadPercent*this.totalWidth},dotoffset:function(){return this.playPercent*this.totalWidth-12}}),methods:{start:function(t){try{var e=this;if(!e.playFlag&&"volume"!=e.type)return;"volume"==e.type&&0==e.playPercent?e.offsetX=0:e.offsetX=e.playWidth,e.status=!0;var n,i=0;n=t.clientX-e.offsetX,document.addEventListener("mousemove",function(t){t.preventDefault(),e.status&&(i=t.clientX-n,e.offsetX=i,e.setPercent(t))}),document.addEventListener("mouseup",function(t){t.preventDefault(),e.status=!1})}catch(t){console.log(t)}},selStart:function(t){try{this.setPercent(t)}catch(t){console.log(t)}},setPercent:function(t){try{var e=0;this.offsetX=t.clientX-this.$refs.total.getBoundingClientRect().left,(e=this.offsetX/this.totalWidth)<0?e=0:e>1&&(e=1),this.$emit("dotPercent",e)}catch(t){console.log(t)}}},mounted:function(){this.totalWidth=this.$refs.total.offsetWidth}}},KvKp:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.parseLyric=function(t){for(var e=t.split("\n"),n=[],i=0;i<e.length;i++){var r=decodeURIComponent(e[i]),c=/\[\d*:\d*((\.|\:)\d*)*\]/g,s=r.match(c);if(s)for(var o=r.replace(c,""),u=0,a=s.length;u<a;u++){var l=s[u],d=60*Number(String(l.match(/\[\d*/i)).slice(1))+Number(String(l.match(/\:\d*/i)).slice(1));""!==o&&n.push({time:d,text:o})}}return n}},M14z:function(t,e,n){"use strict";var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"percent",on:{mousedown:function(e){t.selStart(e)}}},[n("div",{ref:"total",staticClass:"total"},[n("div",{staticClass:"load",style:{width:t.loadWidth+"px"}}),t._v(" "),n("div",{staticClass:"play",style:{width:t.playWidth+"px"}}),t._v(" "),n("div",{staticClass:"dot",style:{left:t.dotoffset+"px"},on:{mousedown:function(e){if(e.target!==e.currentTarget)return null;t.start(e)}}})])])},staticRenderFns:[]};e.a=i},Qoam:function(t,e,n){"use strict";var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index",style:{height:t.musicHeight+"px"}},[n("div",{staticClass:"music-content",style:{height:t.musicContentHeight+"px"}},[n("div",{staticClass:"content-info",style:{height:t.musicInfoHeight+"px"}},[n("keep-alive",[n("control-type")],1),t._v(" "),n("div",{staticClass:"content-left"},[n("router-view")],1),t._v(" "),n("div",{staticClass:"content-right"},[n("lyric",{attrs:{currentTime:t.currentplayTime,lyric:t.currentLyric},on:{currentLyric:t.currentSelLyric}})],1)],1)]),t._v(" "),n("div",{staticClass:"music-contrl"},[n("div",{staticClass:"bar-btn"},[n("div",{staticClass:"bar-btn-list btn-pre iconfont icon-fast-backward",on:{click:t.pre}}),t._v(" "),n("div",{staticClass:"bar-btn-list btn-play iconfont",class:{"icon-poweroff-circle-fill":t.playFlag,"icon-play-circle-fill":!t.playFlag},on:{click:t.play}}),t._v(" "),n("div",{staticClass:"bar-btn-list btn-next iconfont icon-fast-forward",on:{click:t.next}})]),t._v(" "),n("div",{staticClass:"play-percent"},[n("div",{staticClass:"play-percent-title"},[n("span",[t._v(t._s(t.currentMusic.name||"在线播放器"))]),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.currentMusic&&t.currentMusic.duration,expression:"currentMusic && currentMusic.duration"}],staticClass:"play-percent-title-time"},[t._v(t._s(t._f("_formatTime")(t.currentplayTime))+"/"+t._s(t._f("_formatTime")(t.currentMusic.duration)))])]),t._v(" "),n("percent",{attrs:{type:"play",playPercent:t.currentplayPercent,loadPercent:t.currentLoadPercent},on:{dotPercent:t.playDotPercent}})],1),t._v(" "),n("div",{staticClass:"loop-btn iconfont",class:{"icon-liebiaoshunxu":0==t.orderCount,"icon-suijibofang":1==t.orderCount,"icon-danquxunhuan":2==t.orderCount,"icon-retweet":3==t.orderCount},on:{click:t.setMode}}),t._v(" "),n("div",{staticClass:"volume-btn iconfont",class:{"icon-icon_voice":t.currentVolumePercent>0,"icon-icon_mute":0==t.currentVolumePercent},on:{click:t.setMute}}),t._v(" "),n("div",{staticClass:"volume-percent"},[n("percent",{staticClass:"volume-percent-component",attrs:{type:"volume",playPercent:t.currentVolumePercent,loadPercent:"0"},on:{dotPercent:t.volumeDotPercent}})],1)]),t._v(" "),n("div",{staticClass:"mask",style:{backgroundImage:t.picUrl}}),t._v(" "),n("div",{staticClass:"mask-bg"})])},staticRenderFns:[]};e.a=i},QvR7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n("Dd8w"),c=(i=r)&&i.__esModule?i:{default:i},s=n("NYxO");e.default={data:function(){return{lyricHeight:0,translateY:0,currentIndex:0}},filters:{musicContent:function(t,e){return"name"==e?t||"在线音乐播放器":"singer"==e?t||"未知歌手":"album"==e?t||"未知专辑":void 0}},methods:{setCurrentLyric:function(t){try{this.translateY=-40*t}catch(t){console.log(t)}},selLyric:function(t){try{this.$emit("currentLyric",t)}catch(t){console.log(t)}}},props:{lyric:{default:[],type:Array},currentTime:{default:0,type:[Number,String]}},watch:{currentTime:function(t){for(var e=this.lyric,n=0;n<e.length;n++)e[n].time==parseInt(t)&&(this.currentIndex=n,this.setCurrentLyric(n))}},computed:(0,c.default)({},(0,s.mapGetters)(["currentMusic"])),mounted:function(){var t=this;this.$nextTick(function(){t.lyricHeight=t.$refs.lyric.offsetHeight-210})}}},UwYd:function(t,e){},cVso:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=h(n("X+yh")),r=h(n("Dd8w"));n("34+y");var c=h(n("gfkZ")),s=n("vgQg"),o=h(n("5GBp")),u=h(n("4DsF")),a=h(n("suP+")),l=n("NYxO"),d=n("5g4Q"),f=n("KvKp");function h(t){return t&&t.__esModule?t:{default:t}}e.default={mixins:[d.formatTimeMixins],data:function(){return{musicHeight:0,musicContentHeight:0,musicInfoHeight:0,musicReady:!1,currentplayPercent:0,currentplayTime:0,currentLoadPercent:0,currentVolumePercent:0,beforeVolumePercent:0,currentLyric:[],orderCount:0}},methods:(0,r.default)({},(0,l.mapActions)(["setPlayFlag","setCurrentIndex","addHistoryList","initCurrentIndex"]),{initAudio:function(){try{var t=this,e=t.audio;e.addEventListener("timeupdate",function(){t.currentplayPercent=e.currentTime/e.duration,t.currentplayTime=e.currentTime,1==t.currentplayPercent&&t.setOrder()}),e.addEventListener("error",function(){t.currentIndex>=0&&(0,i.default)("播放失败")}),e.addEventListener("progress",function(){t.currentLoadPercent=e.buffered.end(0)/e.duration}),t.beforeVolumePercent=t.currentVolumePercent=t.audio.volume}catch(t){console.log(t)}},pre:function(){try{if(!this.musicReady)return void(0,i.default)("请选择要播放的音乐");0==this.currentIndex?((0,i.default)("已经是第一首了哦"),this.setCurrentIndex(this.currentList.length-1)):this.setCurrentIndex(this.currentIndex-1)}catch(t){console.log(t)}},play:function(){try{if(!this.musicReady)return void(0,i.default)("请选择要播放的音乐");this.setPlayFlag(!this.playFlag)}catch(t){console.log(t)}},next:function(){try{if(!this.musicReady)return void(0,i.default)("请选择要播放的音乐");this.currentIndex<this.currentList.length-1?this.setCurrentIndex(this.currentIndex+1):this.setCurrentIndex(0)}catch(t){console.log(t)}},setMode:function(){try{this.orderCount++,this.orderCount>3&&(this.orderCount=0)}catch(t){console.log(t)}},setOrder:function(){try{var t=this.orderCount;if(0==t)this.currentIndex<this.currentList.length-1?this.setCurrentIndex(this.currentIndex+1):this.initCurrentIndex();else if(1==t){var e=Math.floor(Math.random()*this.currentList.length);e==this.currentIndex&&(e=Math.floor(Math.random()*this.currentList.length)),this.setCurrentIndex(e)}else 2==t?(this.setCurrentIndex(this.currentIndex),this.audio.play()):this.next()}catch(t){console.log(t)}},playDotPercent:function(t){try{var e=this;e.currentplayPercent=t,e.$nextTick(function(){e.audio.currentTime&&(e.audio.currentTime=t*e.audio.duration)})}catch(t){console.log(t)}},volumeDotPercent:function(t){try{var e=this;e.$nextTick(function(){e.audio.volume=e.currentVolumePercent=e.beforeVolumePercent=t})}catch(t){console.log(t)}},setMute:function(){try{this.currentVolumePercent>0?this.audio.volume=this.currentVolumePercent=0:this.audio.volume=this.currentVolumePercent=this.beforeVolumePercent}catch(t){console.log(t)}},currentSelLyric:function(t){try{this.audio.currentTime=this.currentplayPercent=t}catch(t){console.log(t)}},setHeight:function(){try{var t=document.documentElement.clientHeight||document.body.clientHeight;this.musicHeight=t-60,this.musicContentHeight=t-60-80,this.musicInfoHeight=t-63-80}catch(t){console.log(t)}},setLyric:function(t){try{var e=this;c.default.getLyric({id:t}).then(function(t){t.lrc&&t.lrc.lyric?e.currentLyric=(0,f.parseLyric)(t.lrc.lyric):e.currentLyric=[]}).catch(function(t){console.log(t)})}catch(t){console.log(t)}},getSongUrl:function(t){try{var e=this;c.default.getSongUrl({id:t}).then(function(t){t.data&&t.data[0]&&t.data[0].url?(e.audio.src=t.data[0].url,e.audio.play()):(0,i.default)("歌曲不存在")}).catch(function(t){console.log(t),(0,i.default)("歌曲不存在")})}catch(t){return""}}}),computed:(0,r.default)({},(0,l.mapGetters)(["currentMusic","audio","playFlag","currentIndex","currentList","historyList"]),{picUrl:function(){return this.currentMusic&&this.currentMusic.id&&this.currentMusic.image?"url("+this.currentMusic.image+"?param=300y300)":"url("+s.defaultBgImage+")"}}),watch:{currentMusic:function(t,e){t.id?t.id!=e.id&&(this.setLyric(t.id),this.addHistoryList(t),"transceiver"==t.type?this.getSongUrl(t.id):(this.audio.src=t.url,this.audio.play())):this.audio.src=""},playFlag:function(t,e){t?this.audio.play():this.audio.pause(),this.musicReady=!0}},created:function(){},components:{ControlType:o.default,Percent:u.default,Lyric:a.default},mounted:function(){this.setHeight(),this.initAudio()}}},eWc2:function(t,e){},eWkP:function(t,e,n){"use strict";var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"controlType"},t._l(t.btnType,function(e,i){return n("div",{staticClass:"control-btn-list"},[n("div",{staticClass:"controlType-title"},[t._v(t._s(e.title))]),t._v(" "),t._l(e.list,function(e,i){return n("router-link",{key:i,staticClass:"btn iconfont",class:{active:e.id==t.selectId},attrs:{to:e.route}},[n("button",{on:{click:function(n){t.setMusicType(e.id)}}},[n("span",{staticClass:"iconfont",class:e.icon}),t._v(" "+t._s(e.name))])])})],2)}))},staticRenderFns:[]};e.a=i},ekg3:function(t,e){},"suP+":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("QvR7"),r=n.n(i);for(var c in i)"default"!==c&&function(t){n.d(e,t,function(){return i[t]})}(c);var s=n("JcJ0");var o=function(t){n("UwYd")},u=n("VU/8")(r.a,s.a,!1,o,null,null);e.default=u.exports},u8bG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{selectId:0,btnType:[{title:"推荐",list:[{route:"/music/recommend",name:"推荐",id:0,icon:"icon-changjingtuijian"},{route:"/music/transceiver",name:"主播电台",id:1,icon:"icon-diantaizhibo"},{route:"/music/songsheet",name:"歌单",id:2,icon:"icon-icon-"},{route:"/music/search",name:"搜索",id:3,icon:"icon-sousuo"}]},{title:"我的音乐",list:[{route:"/music/currentPlay",name:"正在播放",id:4,icon:"icon-zhengzaijinhang"},{route:"/music/ownlist",name:"我的歌单",id:5,icon:"icon-weibiaoti2fuzhi12"},{route:"/music/historyPlay",name:"我听过的",id:6,icon:"icon-yijingwanchengdexiangmu"}]}]}},methods:{setMusicType:function(t){try{this.selectId=t}catch(t){console.log(t)}}},created:function(){}}},vgQg:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.defaultBgImage="http://cdn.mtnhao.com/music/bg.jpg"}});
//# sourceMappingURL=1.aa1194ae8cfa9ee5d3ff.js.map